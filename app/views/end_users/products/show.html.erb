<%= render 'end_users/end_users/end_user_header' %>

<h1><%= @product.product_name %>の詳細ページ</h1>
 閲覧数: <%= @product.impressions_counts(current_end_user) %>人の方が訪れました
 <br>

<%= attachment_image_tag @product, :product_image, :fill, 400, 200, fallback: "no_image.jpg", size: '400x200' %>
<br>

商品価格:<%= @product.product_price %>円
<br>
商品説明:<%= @product.product_text %>

<p>販売店舗</p>
店舗名:<%= @product.shop.shop_name %>
<br>
<%= attachment_image_tag @product.shop, :shop_image, :fill, 200, 200, fallback: "no_image.jpg", siza: '200x200' %>
<br>
ショップ説明:<%= @product.shop.shop_text %>


<div id= "favorite-<%= @product.id %>"><%= render 'end_users/products/iine', product: @product %>いいね</div>

	<%= form_for(@memory, url: end_users_memories_path ) do |f| %>
		<%= f.hidden_field :product_id, :value => @product.id %>
		<%= f.hidden_field :end_user_id, :value => current_end_user.id %>
		<%= f.submit "予約しておく" %>
	<% end %>


<h2>コメント投稿</h2>
<%= form_with model: [@product,@comment], url: end_users_product_product_comment_path(product_id: @product.id), remote: true do |f| %>
<% if @comment.errors.any? %>
<div class="alert alert-danger" role="alert">
	<p class="error-count"><%= @comment.errors.full_messages.count %>errors prohibited this @comment from being saved:</p>
	<ul>
		<% @comment.errors.full_messages.each do |message| %>
		<li><%= message %></li>
		<% end %>
	</ul>
</div>
<% end %>
<%= f.label :comment, "Comment" %>
<%= f.text_field :comment, size: "100x10", class: "form-control" %>
<%= f.submit 'コメントする' %>
<% end %>

<h2>コメント一覧</h2>
<div id= "submit1">
<%= render 'end_users/products/product_comment', product: @product, comment: @comment %></div>





